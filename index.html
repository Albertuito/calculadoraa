<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Calculadora Hipoteca Instantánea</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root{
      --panel:#121a2a;
      --ink:#fff;
      --muted:#9fb0c9;
      --accent:#f3b014;
      --stroke:rgba(255,255,255,.08);
      --stroke-strong:rgba(243,176,20,.45);
    }
    body{
      background:#0b1220;
      color:var(--ink);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif;
      padding:30px;
    }
    .hh-row{max-width:1040px;margin:auto;}
    .hh-col{max-width:340px;display:flex;}
    .hh-card{
      background:var(--panel);
      color:var(--ink);
      border:1px solid var(--stroke);
      border-radius:14px;
      padding:16px;
      width:100%;
      display:flex;
      flex-direction:column;
      gap:.75rem;
    }
    .hh-card.highlight{
      border-color:var(--stroke-strong);
      box-shadow:0 0 0 1px var(--stroke-strong),0 10px 24px rgba(243,176,20,.12);
    }
    #pro-card{
      background:radial-gradient(1200px 400px at 100% 0%, rgba(243,176,20,.08), transparent 60%),linear-gradient(180deg, rgba(255,255,255,.04), transparent 30%);
      border:1px solid rgba(243,176,20,.35);
      box-shadow:0 0 0 1px rgba(243,176,20,.25),0 12px 28px rgba(243,176,20,.18),inset 0 1px 0 rgba(255,255,255,.06);
    }
    .hh-head{display:flex;justify-content:space-between;align-items:flex-end;}
    .hh-title{font-size:1rem;font-weight:800;color:#fff;margin:0;}
    .hh-pill{font-size:.75rem;padding:.25rem .6rem;border-radius:999px;color:var(--accent);background:rgba(243,176,20,.14);border:1px solid rgba(243,176,20,.35);font-weight:700;}
    .sub{color:var(--muted);font-size:.9rem;}
    .input-group-text{background:transparent;color:#fff;border-right:0;border-color:var(--stroke);}
    .form-control{background:rgba(255,255,255,.06)!important;color:#fff!important;border-left:0;border-color:var(--stroke);}
    .fig{font-weight:900;font-size:1.55rem;line-height:1;}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:.5rem .75rem;}
    .label-sm{color:var(--muted);font-size:.85rem;}
    .val{font-weight:700;}
    #std-total,#pro-total{
      background:var(--accent);color:#111;
      padding:2px 10px;border-radius:10px;font-weight:900;
      box-shadow:0 0 0 1px rgba(0,0,0,.25),0 4px 16px rgba(243,176,20,.25);
    }
    .ribbon{
      position:absolute;top:85px;right:10px;background:var(--accent);
      color:#111;font-weight:900;padding:6px 10px;border-radius:999px;
      box-shadow:0 6px 16px rgba(243,176,20,.3);font-size:.9rem;
    }
    .save-wrap{border:1px dashed var(--accent);background:rgba(243,176,20,.10);border-radius:10px;padding:10px;}
    .save-fig{font-weight:900;font-size:1.25rem;}
    .save-muted{color:var(--muted);font-size:.85rem;}
    .save-row{display:flex;gap:16px;flex-wrap:wrap;align-items:baseline;}
    .save-row>div{display:flex;flex-direction:column;}
  </style>
</head>
<body>
<div class="hh-row">
  <div class="row g-3 justify-content-center align-items-stretch">

    <!-- PRECIO -->
    <div class="col-12 col-lg-4 hh-col">
      <div class="hh-card">
        <div class="hh-head">
          <h3 class="hh-title">Precio de la vivienda</h3>
          <span class="hh-pill">Simulador</span>
        </div>
        <div class="input-group">
          <span class="input-group-text">€</span>
          <input id="price" type="text" inputmode="decimal" class="form-control" placeholder="150.000">
        </div>
        <div class="sub">Introduce el valor de tu vivienda para ver los resultados.</div>
      </div>
    </div>

    <!-- BANCO -->
    <div class="col-12 col-lg-4 hh-col">
      <div class="hh-card" id="bank-card">
        <div class="hh-head">
          <h3 class="hh-title">Hipoteca en tu banco</h3>
          <span class="hh-pill">Referencia</span>
        </div>
        <div class="d-flex align-items-baseline gap-2 mb-1">
          <div id="std-monthly" class="fig">—</div><div class="sub">/mes aprox.</div>
        </div>
        <div id="std-sub" class="sub mb-2">TIN — · Plazo — · Financiación —%</div>
        <div class="grid">
          <div><div class="label-sm">Capital financiado</div><div id="std-capital" class="val">—</div></div>
          <div><div class="label-sm">Intereses totales</div><div id="std-interest" class="val">—</div></div>
          <div><div class="label-sm">Comisión de apertura</div><div id="std-fees" class="val">—</div></div>
          <div><div class="label-sm">Coste total préstamo</div><div id="std-total" class="val">—</div></div>
        </div>
      </div>
    </div>

    <!-- NOSOTROS -->
    <div class="col-12 col-lg-4 hh-col">
      <div class="hh-card highlight position-relative" id="pro-card">
        <div class="ribbon" id="ribbon-save">Ahorro: —</div>
        <div class="hh-head">
          <h3 class="hh-title">Con nosotros</h3>
        </div>
        <div class="d-flex align-items-baseline gap-2 mb-1">
          <div id="pro-monthly" class="fig">—</div><div class="sub">/mes aprox.</div>
        </div>
        <div id="pro-sub" class="sub mb-2">TIN — · Plazo — · Financiación —%</div>
        <div class="grid mb-2">
          <div><div class="label-sm">Capital financiado</div><div id="pro-capital" class="val">—</div></div>
          <div><div class="label-sm">Intereses totales</div><div id="pro-interest" class="val">—</div></div>
          <div><div class="label-sm">Comisión de apertura</div><div id="pro-fees" class="val">—</div></div>
          <div><div class="label-sm">Coste total préstamo</div><div id="pro-total" class="val">—</div></div>
        </div>
        <div class="save-wrap">
          <div class="save-row">
            <div><span class="save-muted">Ahorro total</span><span id="save-total" class="save-fig">—</span></div>
            <div><span class="save-muted">Ahorro mensual</span><span id="save-month" class="save-fig">—</span></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
const CFG={
  ltv:0.80, years:30,
  std:{tin:0.030, openingFeePct:0.005},
  pro:{tin:0.020, openingFeePct:0.000}
};

const fmtMoney=v=>isFinite(v)?new Intl.NumberFormat('es-ES',{style:'currency',currency:'EUR',maximumFractionDigits:0}).format(v):'—';
const fmtPct=v=>(v*100).toFixed(1)+'%';
const monthlyPayment=(P,annual,years)=>{const r=annual/12,n=years*12;return r===0?P/n:P*r/(1-Math.pow(1+r,-n));};
const $=id=>document.getElementById(id);

function compute(price,prog){
  const f=price*CFG.ltv, n=CFG.years*12;
  const p=monthlyPayment(f,prog.tin,CFG.years);
  const i=p*n - f, fee=f*prog.openingFeePct, t=f+i+fee;
  return {f,p,i,fee,t};
}

function render(price){
  if(!isFinite(price)||price<=0) return;
  const b=compute(price,CFG.std);
  const p=compute(price,CFG.pro);
  const saveTotal=b.t-p.t;
  const saveMonth=b.p-p.p;

  $('std-monthly').textContent=fmtMoney(b.p);
  $('std-sub').textContent=`TIN ${fmtPct(CFG.std.tin)} · Plazo ${CFG.years} años · Financiación ${fmtPct(CFG.ltv)}`;
  $('std-capital').textContent=fmtMoney(b.f);
  $('std-interest').textContent=fmtMoney(b.i);
  $('std-fees').textContent=fmtMoney(b.fee);
  $('std-total').textContent=fmtMoney(b.t);

  $('pro-monthly').textContent=fmtMoney(p.p);
  $('pro-sub').textContent=`TIN ${fmtPct(CFG.pro.tin)} · Plazo ${CFG.years} años · Financiación ${fmtPct(CFG.ltv)}`;
  $('pro-capital').textContent=fmtMoney(p.f);
  $('pro-interest').textContent=fmtMoney(p.i);
  $('pro-fees').textContent=fmtMoney(p.fee);
  $('pro-total').textContent=fmtMoney(p.t);

  $('save-total').textContent=fmtMoney(saveTotal);
  $('save-month').textContent=fmtMoney(saveMonth);
  $('ribbon-save').textContent=`Ahorro: ${fmtMoney(saveTotal)}`;
}

document.getElementById('price').addEventListener('input', e=>{
  const raw=e.target.value.replace(/\./g,'').replace(/,/g,'.').replace(/[^\d.]/g,'');
  const num=parseFloat(raw);
  render(num);
});
</script>
</body>
</html>
